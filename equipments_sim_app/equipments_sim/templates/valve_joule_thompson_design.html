{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container-fluid vh-100">
  <div class="row h-100">
    <!-- Form -->
    <div class="col-6">
        <h4 class="design-input-form">Design Parameters</h4>
        <form method="POST" action="{% url 'valve_joule_thompson' %}">
            {% csrf_token %}
            {% if joule_thompson_valve_parameters %}
            <div class="row">
                <!-- Single column form inputs -->
                <div class="col-12">

                    <!-- Inlet Pressure -->
                    <div class="mb-3">
                        <label for="P_in" class="form-label">Inlet Pressure (P_in)</label>
                        <input type="number" step="any" class="form-control" id="P_in" name="P_in" placeholder="{{joule_thompson_valve_parameters.P_in}} Pa" disabled>
                    </div>

                    <!-- Inlet Temperature -->
                    <div class="mb-3">
                        <label for="T_in" class="form-label">Inlet Temperature (T_in)</label>
                        <input type="number" step="any" class="form-control" id="T_in" name="T_in" placeholder="{{joule_thompson_valve_parameters.T_in}} K" disabled>
                    </div>

                    <!-- Outlet Pressure -->
                    <div class="mb-3">
                        <label for="P_out" class="form-label">Outlet Pressure (P_out)</label>
                        <input type="number" step="any" class="form-control" id="P_out" name="P_out" placeholder="{{joule_thompson_valve_parameters.P_out}} Pa" disabled>
                    </div>

                    <!-- Outlet Temperature -->
                    <div class="mb-3">
                        <label for="T_out" class="form-label">Outlet Temperature (T_out)</label>
                        <input type="number" step="any" class="form-control" id="T_out" name="T_out" placeholder="{{joule_thompson_valve_parameters.T_out}} K" disabled>
                    </div>

                </div>
            </div>

            <div class="text-center">
                <button type="submit" class="btn btn-primary w-50 mt-2">Calculate</button>
                <button id = "publish" type="submit" class="btn btn-success width-45 mt-2">Publish</button>
            </div>
            {% endif%}   
        </form>

        <p class="notes"><strong>Output parameters: </strong>Outlet Temperature (T_out): This value represents the final temperature of the gas after expansion through the Joule-Thomson valve. It indicates the cooling effect produced by the throttling process at constant enthalpy. A decrease in T_out compared to T_in signifies effective Joule-Thomson cooling.
        Outlet Pressure (P_out): This is the target downstream pressure after the valve. It defines the extent of expansion and is a key input for determining the temperature drop. P_out is typically lower than P_in and helps in characterizing the pressure differential across the valve.</p>
    </div>

    <!-- Images/3D representation -->

    <div class="col-6 d-flex flex-column h-100 p-0">
      <div id="valveJouleThompson" style="width: 100%; height: 700px;"></div>  
    </div>

  </div>
</div>
{% endblock %}


{% block scripts %}
<script src="{% static 'js/valve_joule_thompson.js' %}"></script>
{% endblock %}
