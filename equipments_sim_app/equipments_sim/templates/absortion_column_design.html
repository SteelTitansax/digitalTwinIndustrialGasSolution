{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container-fluid vh-100">
  <div class="row h-100">
    <!-- Form -->
    <div class="col-6">
        <h4 class="design-input-form">Design Parameters</h4>
        <form method="POST" action="{% url 'absortion_column' %}">
            {% csrf_token %}

            {% if absortion_column_parameters and absortion_column_payload %}
        
              <!-- Column Height (m)-->
              <div class="mb-3">
                <label for="HE" class="form-label">HE - Column Height (m)</label>
                <input type="number" step="any" class="form-control design-control" id="HE" name="HE" value ="{{absortion_column_parameters.HE}}" readonly>
              </div>

              <!-- HETP (Height Equivalent to a Theoretical Plate) -->
              <div class="mb-3">
                <label for="HETP" class="form-label">HETP - Height Equivalent to a Theoretical Plate (m)</label>
                <input type="number" step="any" class="form-control design-control" id="HETP" name="HETP" value="{{absortion_column_parameters.HETP}}" readonly>
              </div>

              <!-- Liquid Molar Fraction (H2O mols / NaOH mols) (Xn) -->
              <div class="mb-3">
              <label for="Xn" class="form-label">Xn - Liquid Molar Fraction (H2O mols / NaOH mols)</label>
              <input type="number" step="any" class="form-control design-control" id="Xn" name="Xn" value="{{absortion_column_parameters.Xn}}" readonly>
              </div>

              <!-- Gas Molar Fraction (H2O mols / Air mols) (Yn) -->
              <div class="mb-3">
              <label for="Yn" class="form-label">Yn - Gas Molar Fraction (H2O mols / Air mols)</label>
              <input type="number" step="any" class="form-control design-control" id="Yn" name="Yn" value="{{absortion_column_parameters.Yn}}" readonly>
              </div>

              <!-- Number of plates (ns) -->
              <div class="mb-3">
              <label for="ns" class="form-label">ns - Number of plates (adimensional)</label>
              <input type="number" step="any" class="form-control design-control" id="ns" name="ns" value="{{absortion_column_parameters.ns}}" readonly>
              </div>

              <!-- Hidden variables -->
              <div class="mb-3">
                <input type="hidden" step="any" class="form-control" id="absortion_column_payload" name="absortion_column_payload" value="{{absortion_column_payload}}" readonly>
              </div>

              <div class="mb-3">
                <input type="hidden" step="any" class="form-control" id="publish_mode" name="publish_mode" value="true" readonly>
              </div>

              <div class="text-center">
                 <button id="publish" type="submit" value="" class="btn btn-success width-45 mt-2">Publish</button>
              </div>
          
        {% endif %}
        </form>

           
       <p class="notes">
          <strong>Output Parameters:</strong>  
          The Height Equivalent to a Theoretical Plate (HETP) indicates the efficiency of mass transfer per plate.  
          The total column height (HE) is calculated based on HETP and the number of theoretical stages.  
          Xn represents the mole fraction of solute in the liquid at the column outlet.  
          ns shows the number of theoretical plates required for the desired separation.
      </p>
      <h5 class="text-center mt-4 text-danger">
          {{error}}
      </h5>
      <h5 class="text-center mt-4 text-success">
          {{success}}
      </h5>
    </div>

    <!-- Images/3D representation -->

    <div class="col-6 d-flex flex-column h-100 p-0">
      <div id="absortionColumn" style="width: 100%; height: 700px;"></div>  
    </div>

  </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{% static 'js/absortion_column.js' %}"></script>

{% endblock %}

